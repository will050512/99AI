
/**
 * 由 Fantastic-admin 提供技術支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-BTce45WY.js";import{d as M,m as k,r as _,a as C,p as r,g as N,c as q,b as e,w as t,h as L,e as d,G as y,j as R,_ as B,k as g}from"./index-nGFMSQGw.js";import{a as z}from"./config-CYXO1pNF.js";const j=d("div",{class:"flex items-center gap-4"},"藍兔支付設置",-1),$=d("div",{class:"text-sm/6"},[d("div",null,[d("a",{href:"https://www.ltzf.cn/",target:"_blank"},"藍兔支付"),L(" 為第三方支付，接入請購買微信渠道。 ")]),d("div",null,"支付通知地址為： https://您的網域名稱/api/pay/notify。")],-1),E=M({__name:"ltzf",setup(H){const a=k({payLtzfStatus:"",payLtzfMchId:"",payLtzfSecret:"",payLtzfNotifyUrl:"",payLtzfReturnUrl:""}),x=_({payLtzfStatus:[{required:!0,trigger:"change",message:"請選擇當前支付開啟狀態"}],payLtzfSecret:[{required:!0,trigger:"blur",message:"請填寫商戶秘鑰"}],payLtzfMchId:[{required:!0,trigger:"blur",message:"請填寫商戶號"}],payLtzfNotifyUrl:[{required:!0,trigger:"blur",message:"請填寫支付通知地址"}]}),c=_();async function i(){const n=await z.queryConfig({keys:["payLtzfSecret","payLtzfNotifyUrl","payLtzfReturnUrl","payLtzfMchId","payLtzfStatus"]});Object.assign(a,n.data)}function V(){var n;(n=c.value)==null||n.validate(async l=>{if(l){try{await z.setConfig({settings:b(a)}),y.success("變更配置資訊成功")}catch{}i()}else y.error("請填寫完整資訊")})}function b(n){return Object.keys(n).map(l=>({configKey:l,configVal:n[l]}))}return C(()=>{i()}),(n,l)=>{const m=R,h=B,v=I,S=r("el-switch"),f=r("el-form-item"),u=r("el-col"),s=r("el-row"),p=r("el-input"),U=r("el-form"),w=r("el-card");return N(),q("div",null,[e(v,null,{title:t(()=>[j]),content:t(()=>[$]),default:t(()=>[e(h,{outline:"",onClick:V},{default:t(()=>[e(m,{name:"i-ri:file-text-line"}),L(" 保存設置 ")]),_:1})]),_:1}),e(w,{style:{margin:"20px"}},{default:t(()=>[e(U,{ref_key:"formRef",ref:c,rules:x.value,model:a,"label-width":"120px"},{default:t(()=>[e(s,null,{default:t(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(f,{label:"啟用當前支付",prop:"payLtzfMchId"},{default:t(()=>[e(S,{modelValue:a.payLtzfStatus,"onUpdate:modelValue":l[0]||(l[0]=o=>a.payLtzfStatus=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(f,{label:"商戶號",prop:"payLtzfMchId"},{default:t(()=>[e(p,{modelValue:a.payLtzfMchId,"onUpdate:modelValue":l[1]||(l[1]=o=>a.payLtzfMchId=o),placeholder:"請填寫商戶號",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(f,{label:"商戶密鑰",prop:"payLtzfSecret"},{default:t(()=>[e(p,{modelValue:a.payLtzfSecret,"onUpdate:modelValue":l[2]||(l[2]=o=>a.payLtzfSecret=o),placeholder:"請填寫商戶秘鑰",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(f,{label:"支付通知地址",prop:"payLtzfSecret"},{default:t(()=>[e(p,{modelValue:a.payLtzfNotifyUrl,"onUpdate:modelValue":l[3]||(l[3]=o=>a.payLtzfNotifyUrl=o),placeholder:"請填寫支付通知地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(f,{label:"支付回調地址",prop:"payLtzfSecret"},{default:t(()=>[e(p,{modelValue:a.payLtzfReturnUrl,"onUpdate:modelValue":l[4]||(l[4]=o=>a.payLtzfReturnUrl=o),placeholder:"請填寫支付成功後的回跳地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof g=="function"&&g(E);export{E as default};
