
/**
 * 由 Fantastic-admin 提供技術支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-DpYLhOHb.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-BTce45WY.js";import{A as K}from"./chat-DSEzBczd.js";import{d as O,r as d,m as W,a as G,p as o,q as J,g as i,c as g,b as t,w as l,F as V,s as U,i as S,h as c,y as Q,z as w,t as _,e as v,K as X,k as L}from"./index-nGFMSQGw.js";import{D as Z}from"./index-BE-LteFu.js";import{u as E}from"./utcformatTime-Bq4gDWNx.js";const ee=v("div",{class:"flex items-center gap-4"},"繪畫記錄",-1),te={class:"answer"},le={class:"answer_container"},ae=O({__name:"draw",setup(oe){const u=d(!1),b=d(),h=d(0),y=d(),n=W({userId:"",rec:"",model:"",page:1,size:14}),k=d([]);async function p(){u.value=!0;try{const r=await K.queryDrawAll(n),{rows:a,count:m}=r.data;u.value=!1,h.value=m,k.value=a}catch{u.value=!1}}async function q(r){const a=await X.queryAllUser({size:30,username:r});y.value=a.data.rows}function B(r){r==null||r.resetFields(),p()}return G(()=>{p()}),(r,a)=>{const m=H,z=o("el-option"),D=o("el-select"),f=o("el-form-item"),x=o("el-button"),M=o("el-form"),I=P,s=o("el-table-column"),R=o("el-image"),T=o("el-tag"),Y=o("el-popover"),F=o("el-table"),N=o("el-pagination"),$=o("el-row"),j=J("loading");return i(),g("div",null,[t(m,null,{title:l(()=>[ee]),_:1}),t(I,null,{default:l(()=>[t(M,{ref_key:"formRef",ref:b,inline:!0,model:n},{default:l(()=>[t(f,{label:"用戶名稱",prop:"userId"},{default:l(()=>[t(D,{modelValue:n.userId,"onUpdate:modelValue":a[0]||(a[0]=e=>n.userId=e),filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"用戶姓名[模糊搜索]","remote-show-suffix":"","remote-method":q,style:{width:"160px"}},{default:l(()=>[(i(!0),g(V,null,U(y.value,e=>(i(),w(z,{key:e.id,label:e.username,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"繪畫模型",prop:"model"},{default:l(()=>[t(D,{modelValue:n.model,"onUpdate:modelValue":a[1]||(a[1]=e=>n.model=e),placeholder:"請選擇繪畫模型",clearable:"",style:{width:"160px"}},{default:l(()=>[(i(!0),g(V,null,U(S(Z),e=>(i(),w(z,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:l(()=>[t(x,{type:"primary",onClick:p},{default:l(()=>[c(" 查詢 ")]),_:1}),t(x,{onClick:a[2]||(a[2]=e=>B(b.value))},{default:l(()=>[c(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(I,{style:{width:"100%"}},{default:l(()=>[Q((i(),w(F,{border:"",data:k.value,style:{width:"100%"},size:"large"},{default:l(()=>[t(s,{prop:"id",align:"center",label:"ID",width:"70"}),t(s,{prop:"userInfo.username",align:"center",label:"用戶名",width:"120"}),t(s,{prop:"userInfo.email",align:"center",label:"用戶郵箱",width:"200"}),t(s,{prop:"drawUrl",align:"center",label:"繪圖結果",width:"200"},{default:l(e=>{var A,C;return[t(R,{style:{height:"50px"},"preview-teleported":"",fit:"contain","preview-src-list":[(A=e.row)==null?void 0:A.fileInfo],src:(C=e.row)==null?void 0:C.fileInfo,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])]}),_:1}),t(s,{prop:"model",label:"種類",width:"180",align:"center"},{default:l(e=>[t(T,{type:"success"},{default:l(()=>[c(_(e.row.model),1)]),_:2},1024)]),_:1}),t(s,{prop:"prompt",label:"繪圖指令",align:"center",width:"250"},{default:l(e=>[t(Y,{placement:"top",width:400,trigger:"click"},{reference:l(()=>[v("div",te,_(e.row.prompt),1)]),default:l(()=>[v("div",le,_(e.row.prompt),1)]),_:2},1024)]),_:1}),t(s,{prop:"progress",align:"center",label:"繪圖進度",width:"90"}),t(s,{prop:"createdAt",label:"繪圖時間",align:"center",width:"200"},{default:l(e=>[c(_(S(E)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)]),_:1})]),_:1},8,["data"])),[[j,u.value]]),t($,{class:"mt-5 flex justify-end"},{default:l(()=>[t(N,{"current-page":n.page,"onUpdate:currentPage":a[3]||(a[3]=e=>n.page=e),"page-size":n.size,"onUpdate:pageSize":a[4]||(a[4]=e=>n.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:h.value,onSizeChange:p,onCurrentChange:p},null,8,["current-page","page-size","total"])]),_:1})]),_:1})])}}});typeof L=="function"&&L(ae);export{ae as default};
