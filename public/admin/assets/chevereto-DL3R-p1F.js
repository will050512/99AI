
/**
 * 由 Fantastic-admin 提供技術支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-BTce45WY.js";import{d as j,m as B,r as N,n as q,a as A,p as n,g as R,c as $,b as e,w as t,h as c,e as s,i as g,G as y,j as E,_ as H,k as b}from"./index-nGFMSQGw.js";import{a as x}from"./config-CYXO1pNF.js";const I=s("div",{class:"flex items-center gap-4"},"Chevereto圖床設置",-1),M=s("div",{class:"text-sm/6"},[s("div",null,[c(" 詳細搭建及配置請參考 "),s("a",{href:"https://v4-docs.chevereto.com/developer/api/api-v1.html",target:"_blank"},"Chevereto圖床文檔"),c(" 。如果同時開啟多個儲存服務，騰訊雲、阿里雲優先級高於 Chevereto 圖床。 ")])],-1),O={class:"flex justify-between"},G=s("b",null,"chevereto圖床參數設置",-1),T=j({__name:"chevereto",setup(z){const l=B({cheveretoStatus:"",cheveretoUploadPath:"",cheveretoKey:""}),_=N();async function m(){const a=await x.queryConfig({keys:["cheveretoKey","cheveretoUploadPath","cheveretoStatus"]});Object.assign(l,a.data)}function p(){var a;(a=_.value)==null||a.validate(async o=>{if(o){try{await x.setConfig({settings:w(l)}),y.success("變更配置資訊成功")}catch{}m()}else y.error("請填寫完整資訊")})}function w(a){return Object.keys(a).map(o=>({configKey:o,configVal:a[o]}))}const f=q(()=>[{required:Number(l.cheveretoStatus)===1,message:"開啟配置後請填寫此項",trigger:"change"}]);return A(()=>{m()}),(a,o)=>{const h=E,V=H,C=P,k=n("el-button"),U=n("el-switch"),u=n("el-form-item"),d=n("el-col"),i=n("el-row"),v=n("el-input"),K=n("el-form"),S=n("el-card");return R(),$("div",null,[e(C,null,{title:t(()=>[I]),content:t(()=>[M]),default:t(()=>[e(V,{outline:"",onClick:p},{default:t(()=>[e(h,{name:"i-ri:file-text-line"}),c(" 保存設置 ")]),_:1})]),_:1}),e(S,{style:{margin:"20px"}},{header:t(()=>[s("div",O,[G,e(k,{class:"button",text:"",onClick:p},{default:t(()=>[c(" 保存設置 ")]),_:1})])]),default:t(()=>[e(K,{ref_key:"formRef",ref:_,model:l,"label-width":"100px"},{default:t(()=>[e(i,null,{default:t(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(u,{label:"服務啟用狀態",prop:"cheveretoStatus"},{default:t(()=>[e(U,{modelValue:l.cheveretoStatus,"onUpdate:modelValue":o[0]||(o[0]=r=>l.cheveretoStatus=r),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(u,{label:"上傳地址",prop:"cheveretoUploadPath",rules:g(f)},{default:t(()=>[e(v,{modelValue:l.cheveretoUploadPath,"onUpdate:modelValue":o[1]||(o[1]=r=>l.cheveretoUploadPath=r),placeholder:"請填寫您的圖床上傳地址",clearable:""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(u,{label:"ApiKey",prop:"cheveretoKey",rules:g(f)},{default:t(()=>[e(v,{modelValue:l.cheveretoKey,"onUpdate:modelValue":o[2]||(o[2]=r=>l.cheveretoKey=r),placeholder:"請填寫ApiKey",clearable:"",type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}});typeof b=="function"&&b(T);export{T as default};
