
/**
 * 由 Fantastic-admin 提供技術支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-BTce45WY.js";import{d as U,m as L,r as g,a as B,p as u,g as N,c as q,b as e,w as l,h as s,e as c,G as h,j as C,_ as j,k as b}from"./index-nGFMSQGw.js";import{a as S}from"./config-CYXO1pNF.js";const $=c("div",{class:"flex items-center gap-4"},"微信登錄設置[仔細閱讀]",-1),E=c("div",{class:"text-sm/6"},[c("div",null," 系統微信登錄通過關聯公眾號實現[請務必註冊為服務號、個人公眾號沒有二維碼等此類權限]。 "),c("div",null,[s(" 請前往 "),c("a",{href:"https://mp.weixin.qq.com/",target:"_blank"},"微信公眾平臺"),s(" ，獲取開發者配置資訊。 ")]),c("div",null," 如果用戶對公眾號發送消息，將會從下面設置的自定義回覆默認資訊。 "),c("div",null,[s(" 同時別忘記在微信公眾號平臺將自己的 ip/網域名稱 加入白名單，配置位置為公眾號後臺->基本配置：服務複製參考 "),c("a",{href:"https://網域名稱/api/official/notify",target:"_blank"},"https://網域名稱/api/official/notify"),s(" 將網域名稱修改為您的網域名稱。 ")]),c("div",null,"下方Token對應自己後臺設置的Token，加密秘鑰隨機即可。"),c("div",null,"當設置不指定首頁並且配置了微信登錄即可默認打開靜默登錄！")],-1),H=U({__name:"wechat",setup(M){const t=L({wechatRegisterStatus:"",wechatSilentLoginStatus:"",wechatOfficialName:"",wechatOfficialAppId:"",wechatOfficialToken:"",wechatOfficialAppSecret:"",officialSubscribeText:"",officialBindAccountText:"",officialScanLoginText:"",officialAutoReplyText:""}),V=g({wechatOfficialName:[{required:!1,trigger:"blur",message:"請填寫微信公眾號名稱"}],wechatOfficialAppId:[{required:!1,trigger:"blur",message:"請填寫微信公眾號開發配置 AppId"}],wechatOfficialToken:[{required:!1,trigger:"blur",message:"請填寫微信公眾號開發配置 Token"}],wechatOfficialAppSecret:[{required:!1,trigger:"blur",message:"請填寫微信公眾號開發配置 AppSecret"}]}),p=g();async function m(){const d=await S.queryConfig({keys:["wechatOfficialName","wechatOfficialAppId","wechatOfficialToken","wechatOfficialAppSecret","officialSubscribeText","officialBindAccountText","officialScanLoginText","officialAutoReplyText","wechatRegisterStatus","wechatSilentLoginStatus"]});Object.assign(t,d.data)}function T(){var d;(d=p.value)==null||d.validate(async a=>{if(a){try{await S.setConfig({settings:A(t)}),h.success("變更配置資訊成功")}catch{}m()}else h.error("請填寫完整資訊")})}function A(d){return Object.keys(d).map(a=>({configKey:a,configVal:d[a]}))}return B(()=>{m()}),(d,a)=>{const _=C,O=j,v=I,w=u("el-switch"),x=u("el-tooltip"),i=u("el-form-item"),n=u("el-col"),f=u("el-row"),r=u("el-input"),y=u("el-divider"),k=u("el-form"),R=u("el-card");return N(),q("div",null,[e(v,null,{title:l(()=>[$]),content:l(()=>[E]),default:l(()=>[e(O,{outline:"",text:"",onClick:T},{default:l(()=>[e(_,{name:"i-ri:file-text-line"}),s(" 保存設置 ")]),_:1})]),_:1}),e(R,{style:{margin:"20px"}},{default:l(()=>[e(k,{ref_key:"formRef",ref:p,rules:V.value,model:t,"label-width":"170px"},{default:l(()=>[e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"是否開啟微信登錄註冊",prop:"wechatRegisterStatus"},{default:l(()=>[e(x,{class:"box-item",effect:"dark",content:"如您啟用微信註冊、則用戶端則可以通過微信掃碼方式註冊或登錄！",placement:"right"},{default:l(()=>[e(w,{modelValue:t.wechatRegisterStatus,"onUpdate:modelValue":a[0]||(a[0]=o=>t.wechatRegisterStatus=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"是否開啟微信靜默",prop:"wechatSilentLoginStatus"},{default:l(()=>[e(x,{class:"box-item",effect:"dark",content:"如您啟用靜默登錄、則用戶在微信環境打開則直接自動登錄！",placement:"right"},{default:l(()=>[e(w,{modelValue:t.wechatSilentLoginStatus,"onUpdate:modelValue":a[1]||(a[1]=o=>t.wechatSilentLoginStatus=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"公眾號名稱",prop:"wechatOfficialName"},{default:l(()=>[e(r,{modelValue:t.wechatOfficialName,"onUpdate:modelValue":a[2]||(a[2]=o=>t.wechatOfficialName=o),placeholder:"公眾號名稱",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"AppId",prop:"wechatOfficialAppId"},{default:l(()=>[e(r,{modelValue:t.wechatOfficialAppId,"onUpdate:modelValue":a[3]||(a[3]=o=>t.wechatOfficialAppId=o),placeholder:"公眾號開發資訊 AppId",clearable:"",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"Token",prop:"wechatOfficialToken"},{default:l(()=>[e(r,{modelValue:t.wechatOfficialToken,"onUpdate:modelValue":a[4]||(a[4]=o=>t.wechatOfficialToken=o),placeholder:"公眾號Token配置",clearable:"",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"AppSecret",prop:"wechatOfficialAppSecret"},{default:l(()=>[e(r,{modelValue:t.wechatOfficialAppSecret,"onUpdate:modelValue":a[5]||(a[5]=o=>t.wechatOfficialAppSecret=o),placeholder:"公眾號開發資訊 AppSecret",clearable:"",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"訂閱公眾號歡迎消息",prop:"officialSubscribeText"},{default:l(()=>[e(r,{modelValue:t.officialSubscribeText,"onUpdate:modelValue":a[6]||(a[6]=o=>t.officialSubscribeText=o),type:"textarea",rows:3,placeholder:"訂閱你的公眾號後對他的歡迎語！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"綁定賬號回覆消息",prop:"officialBindAccountText"},{default:l(()=>[e(r,{modelValue:t.officialBindAccountText,"onUpdate:modelValue":a[7]||(a[7]=o=>t.officialBindAccountText=o),type:"textarea",rows:3,placeholder:"非微信登錄用戶首次綁定微信的歡迎語",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"掃碼登錄回覆消息",prop:"officialScanLoginText"},{default:l(()=>[e(r,{modelValue:t.officialScanLoginText,"onUpdate:modelValue":a[8]||(a[8]=o=>t.officialScanLoginText=o),type:"textarea",rows:3,placeholder:"用戶掃碼登錄成功時自動回覆的內容",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"自定義回覆的默認資訊",prop:"officialAutoReplyText"},{default:l(()=>[e(r,{modelValue:t.officialAutoReplyText,"onUpdate:modelValue":a[9]||(a[9]=o=>t.officialAutoReplyText=o),type:"textarea",rows:3,placeholder:"當用戶對公眾號發了消息不在自動回覆列表時回覆的兜底內容",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof b=="function"&&b(H);export{H as default};
